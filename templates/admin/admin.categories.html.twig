{% extends "baseadmin.html.twig" %}

{% block body %}
{#
    {% for message in app.flashes('error') %}
    <div class="alert alert-danger">
        {{ message }}
    </div>
    {% endfor %}

    {% for message in app.flashes('success') %}
        <div class="alert alert-success">
            {{ message }}
        </div>
    {% endfor %}
#}

    <table class="table table-striped">
        <p class="text-end">
            <a href="{{ path('add.categorie')}}" class="btn btn-primary">Ajouter une catégorie</a>
        </p>
        
        <thead>
                <tr>
                    <th>Nom</th>
                    <th>Nombre de formations</th>
                    <th>Action</th>
                </tr>
        </thead>
        <tbody>
            {% for categorie in categories %}
                <tr>
                    <td>
                        {{ categorie.name }}
                    </td>
                    <td>
                        {{ categorie.formations|length }}
                    </td>
                    <td>
                        {% if categorie.formations|length == 0 %}
                            <a href="{{ path('delete.categorie', {id: categorie.id}) }}" class="btn btn-danger" 
                               onclick="return confirm('Etes-vous sûr de vouloir supprimer {{ categorie.name }} ?');"> Supprimer
                            </a>
                        {% else %}
                            <span class="text-muted">Ne peut pas être supprimer</span>
                        {% endif %}
                    </td>
                </tr>

            {% endfor %}
        </tbody>
    </table>

{% endblock %}

